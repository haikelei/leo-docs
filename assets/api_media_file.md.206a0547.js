import{_ as t,c as e,o as l,N as s}from"./chunks/framework.fc67cb9d.js";const h=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"api/media/file.md","lastUpdated":1685603474000}'),n={name:"api/media/file.md"},a=s(`<h3 id="uni-choosefile-object" tabindex="-1">uni.chooseFile(OBJECT) <a class="header-anchor" href="#uni-choosefile-object" aria-label="Permalink to &quot;uni.chooseFile(OBJECT)&quot;">​</a></h3><p>从本地选择文件。</p><p>本API主要用于选择非媒体文件，如果选择的文件是媒体文件，另有3个专用API：</p><ul><li><a href="https://uniapp.dcloud.io/api/media/image?id=chooseimage" target="_blank" rel="noreferrer">图片选择</a></li><li><a href="https://uniapp.dcloud.io/api/media/video?id=choosevideo" target="_blank" rel="noreferrer">视频选择</a></li><li><a href="https://uniapp.dcloud.io/api/media/video?id=choosemedia" target="_blank" rel="noreferrer">多媒体文件选择(含图片视频)</a></li></ul><p><strong>平台差异说明</strong></p><table><thead><tr><th style="text-align:center;">App</th><th style="text-align:center;">H5</th><th style="text-align:center;">微信小程序</th><th style="text-align:center;">支付宝小程序</th><th style="text-align:center;">百度小程序</th><th style="text-align:center;">字节跳动小程序、飞书小程序</th><th style="text-align:center;">QQ小程序</th><th style="text-align:center;">快手小程序</th><th style="text-align:center;">京东小程序</th></tr></thead><tbody><tr><td style="text-align:center;">x</td><td style="text-align:center;">√<code>(HBuilder X2.9.9+)</code></td><td style="text-align:center;">x<code>(可使用wx.chooseMessageFile)</code></td><td style="text-align:center;">x</td><td style="text-align:center;">x</td><td style="text-align:center;">x</td><td style="text-align:center;">x</td><td style="text-align:center;">x</td><td style="text-align:center;">x</td></tr></tbody></table><ul><li>App端如需选择非媒体文件，可在插件市场搜索<a href="https://ext.dcloud.net.cn/search?q=%E6%96%87%E4%BB%B6%E9%80%89%E6%8B%A9" target="_blank" rel="noreferrer">文件选择</a>，其中Android端可以使用Native.js，无需原生插件，而iOS端需要原生插件。</li><li>App端如果想选择下载到<code>_doc</code>、<code>_downloads</code>、<code>_documents</code>等plus.io控制的目录下的文件，可通过<a href="https://www.html5plus.org/doc/zh_cn/io.html" target="_blank" rel="noreferrer">plus.io Api</a>，自己做选择框。</li><li>选择文件大多为了上传，uni ui封装了更完善的<a href="https://ext.dcloud.net.cn/plugin?id=4079" target="_blank" rel="noreferrer">uni-file-picker组件</a>，文件选择、上传到uniCloud的免费存储和cdn中，一站式集成。强烈推荐使用。</li></ul><p><strong>OBJECT 参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数名</th><th style="text-align:left;">类型</th><th style="text-align:left;">默认值</th><th style="text-align:left;">必填</th><th style="text-align:left;">说明</th><th style="text-align:left;">平台差异说明</th></tr></thead><tbody><tr><td style="text-align:left;">count</td><td style="text-align:left;">Number</td><td style="text-align:left;">100</td><td style="text-align:left;">否</td><td style="text-align:left;">最多可以选择的文件数量</td><td style="text-align:left;">见下方说明</td></tr><tr><td style="text-align:left;">type</td><td style="text-align:left;">String</td><td style="text-align:left;">&#39;all&#39;</td><td style="text-align:left;">否</td><td style="text-align:left;">所选的文件的类型</td><td style="text-align:left;">见下方说明</td></tr><tr><td style="text-align:left;">extension</td><td style="text-align:left;">Array&lt;String&gt;</td><td style="text-align:left;"></td><td style="text-align:left;">否</td><td style="text-align:left;">根据文件拓展名过滤，每一项都不能是空字符串。默认不过滤。</td><td style="text-align:left;">见下方说明</td></tr><tr><td style="text-align:left;">sourceType</td><td style="text-align:left;">Array&lt;String&gt;</td><td style="text-align:left;">[&#39;album&#39;,&#39;camera&#39;]</td><td style="text-align:left;">否</td><td style="text-align:left;">（仅在type为<code>image</code>或<code>video</code>时可用）<code>album</code> 从相册选图，<code>camera</code> 使用相机，默认二者都有。如需直接开相机或直接选相册，请只使用一个选项</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">success</td><td style="text-align:left;">Function</td><td style="text-align:left;"></td><td style="text-align:left;">是</td><td style="text-align:left;">成功则返回图片的本地文件路径列表 <code>tempFilePaths</code></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">fail</td><td style="text-align:left;">Function</td><td style="text-align:left;"></td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用失败的回调函数</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">complete</td><td style="text-align:left;">Function</td><td style="text-align:left;"></td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用结束的回调函数（调用成功、失败都会执行）</td><td style="text-align:left;"> </td></tr></tbody></table><p><strong>Tips</strong></p><ul><li>count 值在 H5 平台的表现，基于浏览器本身的规范。目前测试的结果来看，只能限制单选/多选，并不能限制数量。并且，在实际的手机浏览器很少有能够支持多选的。</li><li>sourceType 值在 H5 平台根据浏览器的不同而表现不同，一般不可限制仅使用相册，部分浏览器也无法限制是否使用相机。</li><li>extension暂只支持文件后缀名，例如<code>[&#39;.zip&#39;,&#39;.exe&#39;,&#39;.js&#39;]</code>，不支持<code>application/msword</code>等类似值</li></ul><p><strong>注：文件的临时路径，在应用本次启动期间可以正常使用，如需持久保存，需在主动调用 <a href="./api/file/file.html?id=savefile">uni.saveFile</a>，在应用下次启动时才能访问得到。</strong></p><p><strong>OBJECT.type 的合法值</strong></p><table><thead><tr><th style="text-align:left;">值</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">all</td><td style="text-align:left;">从所有文件选择</td></tr><tr><td style="text-align:left;">video</td><td style="text-align:left;">只能选择视频文件</td></tr><tr><td style="text-align:left;">image</td><td style="text-align:left;">只能选择图片文件</td></tr></tbody></table><p><strong>Tips</strong></p><ul><li>如果type属性和extension同时存在，例如<code>{type:&#39;image&#39;,extension:[&#39;.png&#39;,&#39;.jpg&#39;]}</code>，则会选择<code>image/png,image/jpg</code>文件</li><li>如果只配置extension属性，例如<code>{extension:[&#39;.doc&#39;,&#39;.xlsx&#39;,&#39;.docx&#39;]}</code>，则会选择<code>.doc,.xlsx,.docx</code>文件，详情见<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Attributes/accept" target="_blank" rel="noreferrer"><code>accept属性</code></a></li><li>在微信环境中，如果<code>type=&quot;all&quot;</code>，则<code>extension</code>属性失效</li></ul><p><strong>success 返回参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">tempFilePaths</td><td style="text-align:left;">Array&lt;String&gt;</td><td style="text-align:left;">文件的本地文件路径列表</td></tr><tr><td style="text-align:left;">tempFiles</td><td style="text-align:left;">Array&lt;Object&gt;、Array&lt;File&gt;</td><td style="text-align:left;">文件的本地文件列表，每一项是一个 File 对象</td></tr></tbody></table><p><strong>File 对象结构如下</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">path</td><td style="text-align:left;">String</td><td style="text-align:left;">本地文件路径</td></tr><tr><td style="text-align:left;">size</td><td style="text-align:left;">Number</td><td style="text-align:left;">本地文件大小，单位：B</td></tr><tr><td style="text-align:left;">name</td><td style="text-align:left;">String</td><td style="text-align:left;">包含扩展名的文件名称，仅H5支持</td></tr><tr><td style="text-align:left;">type</td><td style="text-align:left;">String</td><td style="text-align:left;">文件类型，仅H5支持</td></tr></tbody></table><p><strong>示例</strong></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">chooseFile</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">count</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//默认100</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">extension</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.zip</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.doc</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">success</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">tempFilePaths</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 选择图片文件</span></span>
<span class="line"><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">chooseFile</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">count</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">image</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">success</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// tempFilePath可以作为img标签的src属性显示图片</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tempFilePaths</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">tempFiles</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="wx-choosemessagefile-object" tabindex="-1">wx.chooseMessageFile(OBJECT) <a class="header-anchor" href="#wx-choosemessagefile-object" aria-label="Permalink to &quot;wx.chooseMessageFile(OBJECT)&quot;">​</a></h3><p>从微信聊天会话中选择文件。</p><p><strong>平台差异说明</strong></p><table><thead><tr><th style="text-align:center;">App</th><th style="text-align:center;">H5</th><th style="text-align:center;">微信小程序</th><th style="text-align:center;">支付宝小程序</th><th style="text-align:center;">百度小程序</th><th style="text-align:center;">字节跳动小程序、飞书小程序</th><th style="text-align:center;">QQ小程序</th><th style="text-align:center;">快手小程序</th><th style="text-align:center;">京东小程序</th></tr></thead><tbody><tr><td style="text-align:center;">x</td><td style="text-align:center;">x</td><td style="text-align:center;">√<code>(基础库2.5.0+)</code></td><td style="text-align:center;">x</td><td style="text-align:center;">x</td><td style="text-align:center;">x</td><td style="text-align:center;">√<code>(基础库1.18.0+)</code></td><td style="text-align:center;">x</td><td style="text-align:center;">x</td></tr></tbody></table>`,26),o=[a];function p(r,i,d,c,y,g){return l(),e("div",null,o)}const F=t(n,[["render",p]]);export{h as __pageData,F as default};
