import{_ as t,c as s,o as n,N as a}from"./chunks/framework.fc67cb9d.js";const C=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"component/editor.md","lastUpdated":1685603474000}'),l={name:"component/editor.md"},o=a(`<h4 id="editor" tabindex="-1">editor <a class="header-anchor" href="#editor" aria-label="Permalink to &quot;editor&quot;">​</a></h4><p>富文本编辑器，可以对图片、文字格式进行编辑和混排。</p><p>在web开发时，可以使用<code>contenteditable</code>来实现内容编辑。但这是一个dom API，在非H5平台无法使用。于是微信小程序和uni-app的App-vue提供了<code>editor</code>组件来实现这个功能，并且在uni-app的H5平台也提供了兼容。从技术本质来讲，这个组件仍然运行在视图层webview中，利用的也是浏览器的<code>contenteditable</code>功能。</p><p>编辑器导出内容支持带标签的 <code>html</code>和纯文本的 <code>text</code>，编辑器内部采用 <code>delta</code> 格式进行存储。</p><p>通过<code>setContents</code>接口设置内容时，解析插入的 <code>html</code> 可能会由于一些非法标签导致解析错误，建议开发者在应用内使用时通过 delta 进行插入。</p><p>富文本组件内部引入了一些基本的样式使得内容可以正确的展示，开发时可以进行覆盖。需要注意的是，在其它组件或环境中使用富文本组件导出的html时，需要额外引入<a href="https://github.com/dcloudio/uni-app/blob/master/src/core/view/components/editor/editor.css" target="_blank" rel="noreferrer">这段样式</a>，并维护<code>&lt;ql-container&gt;&lt;ql-editor&gt;&lt;/ql-editor&gt;&lt;/ql-container&gt;</code>的结构，参考：<a href="https://ask.dcloud.net.cn/article/36205" target="_blank" rel="noreferrer">使用 editor 组件导出的 html</a>。</p><p>图片控件仅初始化时设置有效。</p><p>相关 api：<a href="/leo-docs/api/media/editor-context.html">editorContext</a></p><p><strong>平台差异说明</strong></p><table><thead><tr><th style="text-align:center;">App</th><th style="text-align:center;">H5</th><th style="text-align:center;">微信小程序</th><th style="text-align:center;">支付宝小程序</th><th style="text-align:center;">百度小程序</th><th style="text-align:center;">字节跳动小程序、飞书小程序</th><th style="text-align:center;">QQ小程序</th><th style="text-align:center;">快应用</th><th style="text-align:center;">360小程序</th><th style="text-align:center;">快手小程序</th></tr></thead><tbody><tr><td style="text-align:center;">2.0+，app-vue</td><td style="text-align:center;">2.4.5+</td><td style="text-align:center;">基础库 2.7.0+</td><td style="text-align:center;">x</td><td style="text-align:center;">需引入动态库<a href="https://smartprogram.baidu.com/docs/develop/framework/dynamiclib_use/" target="_blank" rel="noreferrer">引入方式</a></td><td style="text-align:center;">x</td><td style="text-align:center;">x</td><td style="text-align:center;">x</td><td style="text-align:center;">x</td><td style="text-align:center;">x</td></tr></tbody></table><p>editor组件目前只有H5、App的vue页面、微信小程序、百度小程序支持，其他端平台自身未提供editor组件，只能使用web-view加载web页面，也可搜索<a href="https://ext.dcloud.net.cn/search?q=%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91" target="_blank" rel="noreferrer">插件市场</a> 获取简单的markdown富文本编辑器</p><table><thead><tr><th>属性</th><th>类型</th><th>默认值</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td>read-only</td><td>boolean</td><td>false</td><td>否</td><td>设置编辑器为只读</td></tr><tr><td>placeholder</td><td>string</td><td></td><td>否</td><td>提示信息</td></tr><tr><td>show-img-size</td><td>boolean</td><td>false</td><td>否</td><td>点击图片时显示图片大小控件</td></tr><tr><td>show-img-toolbar</td><td>boolean</td><td>false</td><td>否</td><td>点击图片时显示工具栏控件</td></tr><tr><td>show-img-resize</td><td>boolean</td><td>false</td><td>否</td><td>点击图片时显示修改尺寸控件</td></tr><tr><td>@ready</td><td>eventhandle</td><td></td><td>否</td><td>编辑器初始化完成时触发</td></tr><tr><td>@focus</td><td>eventhandle</td><td></td><td>否</td><td>编辑器聚焦时触发，<code>event.detail = {html, text, delta}</code></td></tr><tr><td>@blur</td><td>eventhandle</td><td></td><td>否</td><td>编辑器失去焦点时触发，<code>detail = {html, text, delta}</code></td></tr><tr><td>@input</td><td>eventhandle</td><td></td><td>否</td><td>编辑器内容改变时触发，<code>detail = {html, text, delta}</code></td></tr><tr><td>@statuschange</td><td>eventhandle</td><td></td><td>否</td><td>通过 Context 方法改变编辑器内样式时触发，返回选区已设置的样式</td></tr></tbody></table><p>编辑器内支持部分 HTML 标签和内联样式，不支持<strong>class</strong>和<strong>id</strong></p><h4 id="支持的标签" tabindex="-1">支持的标签 <a class="header-anchor" href="#支持的标签" aria-label="Permalink to &quot;支持的标签&quot;">​</a></h4><p>不满足的标签会被忽略，<code>&lt;div&gt;</code>会被转行为<code>&lt;p&gt;</code>储存。</p><table><thead><tr><th>类型</th><th>节点</th><th>平台差异说明</th></tr></thead><tbody><tr><td>行内元素</td><td><code>&lt;span&gt; &lt;strong&gt; &lt;b&gt; &lt;ins&gt; &lt;em&gt; &lt;i&gt; &lt;u&gt; &lt;a&gt; &lt;del&gt; &lt;s&gt; &lt;sub&gt; &lt;sup&gt; &lt;img&gt;</code></td><td>其中<code>&lt;ins&gt; &lt;del&gt; </code>百度小程序不支持</td></tr><tr><td>块级元素</td><td><code>&lt;br&gt; &lt;p&gt; &lt;h1&gt; &lt;h2&gt; &lt;h3&gt; &lt;h4&gt; &lt;h5&gt; &lt;h6&gt; &lt;hr&gt; &lt;ol&gt; &lt;ul&gt; &lt;li&gt;</code></td><td>其中<code>&lt;br&gt;</code>仅百度小程序支持、<code>&lt;p&gt;</code>百度小程序不支持</td></tr></tbody></table><h4 id="支持的内联样式" tabindex="-1">支持的内联样式 <a class="header-anchor" href="#支持的内联样式" aria-label="Permalink to &quot;支持的内联样式&quot;">​</a></h4><p>内联样式仅能设置在行内元素或块级元素上，不能同时设置。例如 font-size\` 归类为行内元素属性，在 p 标签上设置是无效的。</p><table><thead><tr><th>类型</th><th>样式</th><th>平台差异说明</th></tr></thead><tbody><tr><td>块级样式</td><td><code>text-align</code> <code>direction</code> <code>margin</code> <code>margin-top</code> <code>margin-left</code> <code>margin-right</code> <code>margin-bottom</code> <code>padding</code> <code>padding-top</code> <code>padding-left</code> <code>padding-right</code> <code>padding-bottom</code> <code>line-height</code> <code>text-indent</code></td><td>百度小程序仅支持<code>text-align、direction</code></td></tr><tr><td>行内样式</td><td><code>font</code> <code>font-size</code> <code>font-style</code> <code>font-variant</code> <code>font-weight</code> <code>font-family</code> <code>letter-spacing</code> <code>text-decoration</code> <code>color</code> <code>background-color</code></td><td>百度小程序仅支持<code>color、background-color</code></td></tr></tbody></table><p><strong>注意事项</strong></p><ul><li>插入的 html 中事件绑定会被移除</li><li>formats 中的 color 属性会统一以 hex 格式返回</li><li>粘贴时仅纯文本内容会被拷贝进编辑器</li><li>插入 html 到编辑器内时，编辑器会删除一些不必要的标签，以保证内容的统一。例如<code>&lt;p&gt;&lt;span&gt;xxx&lt;/span&gt;&lt;/p&gt;</code>会改写为<code>&lt;p&gt;xxx&lt;/p&gt;</code></li><li>编辑器聚焦时页面会被上推，系统行为以保证编辑区可见</li><li>H5端会动态引入依赖 <a href="https://unpkg.com/quill@1.3.7/dist/quill.min.js" target="_blank" rel="noreferrer">quill.min.js</a>、<a href="https://unpkg.com/quill-image-resize-mp@3.0.1/image-resize.min.js" target="_blank" rel="noreferrer">image-resize.min.js</a>，依赖从 <a href="https://unpkg.com" target="_blank" rel="noreferrer">unpkg.com</a> 加载，如过依赖加载较慢，可以下载下来放在自己的服务器或 CDN 服务商，然后在 <a href="/leo-docs/collocation/manifest.html?id=h5-template">自定义模板</a> head 内引入。</li><li>不能直接插入视频或者其他文件，编辑时可以采用视频封面或者文件缩略图占位，并在图片属性中保存视频信息，预览时读取附加信息再还原为视频或者其他文件操作。</li></ul><p><strong>示例代码</strong> <a href="https://hellouniapp.dcloud.net.cn/pages/component/editor/editor" target="_blank" rel="noreferrer">查看演示</a></p><p>::: preview <a href="https://hellouniapp.dcloud.net.cn/pages/component/editor/editor" target="_blank" rel="noreferrer">https://hellouniapp.dcloud.net.cn/pages/component/editor/editor</a></p><blockquote><p>Template</p></blockquote><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">container</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">editor</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">editor</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ql-container</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">:placeholder</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">placeholder</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">@ready</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">onEditorReady</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">editor</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">warn</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">@tap</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">undo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">撤销</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><blockquote><p>Script</p></blockquote><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">				placeholder</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">开始输入...</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#F07178;">methods</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#F07178;">onEditorReady</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">			    </span><span style="color:#676E95;font-style:italic;">// #ifdef MP-BAIDU</span></span>
<span class="line"><span style="color:#F07178;">			    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">editorCtx</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">requireDynamicLib</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">editorLib</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createEditorContext</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">editor</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">			    </span><span style="color:#676E95;font-style:italic;">// #endif</span></span>
<span class="line"><span style="color:#F07178;">			    </span></span>
<span class="line"><span style="color:#89DDFF;">			    </span><span style="color:#676E95;font-style:italic;">// #ifdef APP-PLUS || H5 ||MP-WEIXIN</span></span>
<span class="line"><span style="color:#F07178;">			    </span><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createSelectorQuery</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">select</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#editor</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">context</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">			      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">editorCtx</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">context</span></span>
<span class="line"><span style="color:#F07178;">			    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exec</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#89DDFF;">			    </span><span style="color:#676E95;font-style:italic;">// #endif</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#F07178;">undo</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">				</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">editorCtx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">undo</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">			</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><blockquote><p>Style</p></blockquote><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">container</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#B2CCD6;">padding</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10px</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">#</span><span style="color:#F78C6C;">editor</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#B2CCD6;">width</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">100%</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#B2CCD6;">height</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">300px</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#B2CCD6;">background-color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">#</span><span style="color:#A6ACCD;">CCCCCC</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#FFCB6B;">button</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#B2CCD6;">margin-top</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10px</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">style</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>:::</p><p>一个完整的内容管理系统比较复杂，DCloud已提供好了现成的<code>uni-cms</code>，开源、免费、全端可用、功能完善，包括管理端和用户端。还内置了ai生成文章和广告变现功能。详见：<a href="https://uniapp.dcloud.net.cn/uniCloud/uni-cms.html" target="_blank" rel="noreferrer">https://uniapp.dcloud.net.cn/uniCloud/uni-cms.html</a></p>`,31),e=[o];function p(c,r,d,y,F,D){return n(),s("div",null,e)}const h=t(l,[["render",p]]);export{C as __pageData,h as default};
