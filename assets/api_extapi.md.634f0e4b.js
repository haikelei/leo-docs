import{_ as l,c as p,o,N as a,x as s,a as n}from"./chunks/framework.fc67cb9d.js";const g=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"api/extapi.md","lastUpdated":1685603474000}'),e={name:"api/extapi.md"},t=a(`<h2 id="什么是-uni-ext-api" tabindex="-1">什么是 uni ext api <a class="header-anchor" href="#什么是-uni-ext-api" aria-label="Permalink to &quot;什么是 uni ext api&quot;">​</a></h2><blockquote><p>新增于HBuilderX 3.6.7</p></blockquote><p>uni ext api，是一种需要下载<a href="https://uniapp.dcloud.net.cn/plugin/uni_modules.html" target="_blank" rel="noreferrer">uni_modules</a>插件才能使用的、uni.开头的js API。</p><p>它是uni对象的方法，但不预置在uni-app的runtime中，需要单独下载对应的<code>uni_modules</code>。</p><p>示例：</p><p>uni.getBatteryInfo，这个API就是一个<code>ext api</code>，需要下载插件才能使用。<a href="https://uniapp.dcloud.net.cn/api/system/batteryInfo.html" target="_blank" rel="noreferrer">详见</a></p><ul><li>背景1，uni-app runtime越来越大</li></ul><p>uni对象的api，如uni.navigateTo，之前都是内置在uni-app的runtime中的，跟随uni-app/HBuilder的升级而变化。</p><p>随着各家小程序和uni-app的演进，uni-app的api越来越多，而很多api又不常用，这会增加uni-app的runtime体积，尤其是在web和app平台。</p><p>比如很多小程序都内置有<code>getBatteryInfo</code>获取电量的API，在uni-app中理应拉齐各端实现，但在uni-app的web和app上内置它并不合适。</p><p>所以推出了<code>uni ext api</code>，这些API以<code>uni_modules</code>的方式出现，从插件市场单独下载。但导入到工程后，仍使用<code>uni.getBatteryInfo</code>方式来调用。</p><p>为此，在这些<code>uni_modules</code>的<code>package.json</code>中提供了一种特殊的注册方式，允许插件向uni对象自动挂载api。（只有DCloud官方插件，以<code>uni-</code>开头的插件，才能使用此机制）</p><ul><li>背景2，uts将重构uni-app的内部实现</li></ul><p>在过去，uni-app的web和小程序端，是github的独立项目，由DCloud的js团队维护。而uni-app的app端，是另2个独立项目，由DCloud的原生团队维护。 每次新加一个api，需要各个团队在不同的工程里开发，尤其是app端，需要先在原生项目里开发，然后在前端项目里封装。还需要再另一个语法提示工程中编写代码提示。</p><p>有了uts后，uni-app的实现机制将被重构，大幅的简化。</p><p>每个api，都使用uts这门统一的语言来开发，不再使用不同的技术语言。作为一个独立的<code>uni_modules</code>，独立的工程，有独立的版本。</p><p>仍然以<code>uni.getBatteryInfo</code>电量为例，开发这个api，不再需要在庞大复杂的uni-app的若干个项目里编码，也不需要再关心功能间关联和耦合。</p><p>只需要在<code>uni-getBatteryInfo</code>这个<code>uni_modules</code>下开发，目录结构如下。</p><p>这个目录清晰的列出了这个插件要做的所有事情：在不同的目录下编写uts或js代码、在d.ts里写语法提示。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">uni_modules</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">uni-getbatteryinfo</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">changelog.md</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.d.ts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">类型声明，需要同时扩展</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">uni</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">声明当前注册的</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">API</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">package.json</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">readme.md</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">utssdk</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">在不同目录实现平台能力</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">app-android</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.uts</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">app-ios</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.uts</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mp-weixin</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.js</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">web</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">         </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.js</span></span>
<span class="line"></span></code></pre></div><p>这种模式，还给开发者带来若干好处，比如开放性和灵活性。</p><ul><li>以往，uni-app内置api如果有bug，普通开发者很难看懂源码，很难参与完善。</li></ul><p>现在，在uts的支持下，普通前端也可以review这些api的实现，发现其中的问题和提出改进方案。</p><ul><li>以往，这些uni api的bug被修复时，需要等待HBuilder发版，由于每次发版都需要发很多功能，可能bug1虽然已经修好，但bug2复测出问题，导致版本不能及时发布。</li></ul><p>现在，ext api的<code>uni_modules</code>脱离HBuilder独立升级，快速解决开发者的问题。并且开发者可以自己修本地工程中ext api的bug。让问题得以更快速的解决。</p><ul><li>背景3，内置api复写</li></ul><p>很多uni的内置api，比如<code>uni.showWaiting</code>，实现的比较简单，在web端，常见的waiting都有更丰富的样式、使用更多的图片资源。</p><p>uni-app的runtime不适合内置很多waiting样式和资源，而使用三方插件，又需要按三方插件的写法调用，之前工程里写好的<code>uni.showWaiting</code>的代码不得不重改。</p><p>有了<code>ext api</code>，可以实现一个<code>uni-showwaiting</code>的<code>uni_modules</code>，在web端提供更丰富的效果，并且开源，可自由裁剪和增补。</p><p>导入这个<code>uni_modules</code>后，之前的<code>uni.showWaiting</code>的api的功能就被复写。</p><p>综上，背景1、2、3的问题，都将使用<code>uni ext api</code>来解决。uni-app很多新增的、不常用的api将采用<code>ext api</code>方式。</p><p>在uts的发展路线上，uni-app自身也将使用uts实现；使用uts将可以开发完整的uni-app。</p><p>目前所有的<code>ext api</code>，在未来的uts版的uni-app，其内置的uni对象的api中，均会得到复用。也就是说<code>ext api</code>将大幅推进下一代uni-app（纯uts版）的上线速度。</p><p>欢迎广大开发者参与到<code>uni ext api</code>的开源共建中来。</p><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h2><ol><li>由于开发api是以uni.开头的，所以无法像普通插件那样由开发者自己开发、自己发布。</li></ol><p>参与共建的开发者需要在DCloud官方插件的开源项目中提pr，由官方审核后再发布新版uni_modules。</p><p>也只有<code>uni-</code>开头的插件，才能在package.json中编写注册声明，挂载方法到uni对象上。</p><ol start="2"><li><code>uni ext api</code>的版本将不再跟随HBuilder和uni-app cli的版本，它将是独立的版本。</li></ol><p>只有uni的内置api才跟随HBuilder升级。请记得内置api和<code>ext api</code>的区别。</p><ol start="3"><li><code>ext api</code>的实现不一定都是uts，但如果使用了uts，则将受uts自身的约束。如</li></ol><ul><li>uts在iOS上真机运行必须打包自定义基座。后续官方会继续优化</li><li>uts在Android上涉及arr、jar、so库等三方sdk的时候，也需打包自定义基座才能真机运行。</li><li>wgt升级只对js、css生效，uts代码无法热更新。但这不意味着使用uts的项目就失去热更新能力，只是uts部分不能热更。js、vue、css、图片仍然可以打包成wgt热更。</li></ul><ol start="4"><li><code>ext api</code>在入口文件<code>export</code>的API，必须在<code>package.json</code>中编写注册声明</li></ol><h2 id="如何开发uni-ext-api" tabindex="-1">如何开发uni ext api <a class="header-anchor" href="#如何开发uni-ext-api" aria-label="Permalink to &quot;如何开发uni ext api&quot;">​</a></h2><h3 id="创建一个符合规则的uni-modules插件-通常是utssdk类型-如uni-getbatteryinfo" tabindex="-1">创建一个符合规则的<code>uni_modules</code>插件（通常是<code>utssdk</code>类型），如<code>uni-getbatteryinfo</code> <a class="header-anchor" href="#创建一个符合规则的uni-modules插件-通常是utssdk类型-如uni-getbatteryinfo" aria-label="Permalink to &quot;创建一个符合规则的\`uni_modules\`插件（通常是\`utssdk\`类型），如\`uni-getbatteryinfo\`&quot;">​</a></h3><p><strong>注意：</strong> 插件ID格式为：<code>uni-API名称全小写</code></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">uni_modules</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">uni-getbatteryinfo</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">changelog.md</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.d.ts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">类型声明，需要同时扩展</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">uni</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">声明当前注册的</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">API</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">package.json</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">readme.md</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">utssdk</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">在不同目录实现平台能力</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">app-android</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.uts</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">app-ios</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.uts</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">├──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mp-weixin</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.js</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">web</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">│  </span><span style="color:#A6ACCD;">         </span><span style="color:#C3E88D;">└──</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.js</span></span>
<span class="line"></span></code></pre></div><h3 id="配置package-json" tabindex="-1">配置<code>package.json</code> <a class="header-anchor" href="#配置package-json" aria-label="Permalink to &quot;配置\`package.json\`&quot;">​</a></h3><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">uni_modules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">uni-ext-api</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">uni</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#676E95;font-style:italic;">// string | string[] | Record&lt;string,string&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ul><li>默认导出</li></ul><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">uni_modules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">uni-ext-api</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">uni</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">getBatteryInfo</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">// 等同于</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">// import getBatteryInfo from &quot;@/uni_modules/uni-getbatteryinfo&quot;;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">// uni.getBatteryInfo = getBatteryInfo</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ul><li>导出多个</li></ul><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">uni_modules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">uni-ext-api</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">uni</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">getBatteryInfo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">isCharging</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">// 等同于</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">// import { getBatteryInfo, isCharging } from &quot;@/uni_modules/uni-getbatteryinfo&quot;;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">// uni.getBatteryInfo = getBatteryInfo</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">// uni.isCharging = isCharging</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ul><li>导出别名</li></ul><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">uni_modules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">uni-ext-api</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">uni</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">onUserCaptureScreen</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">onCaptureScreen</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">offUserCaptureScreen</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">offCaptureScreen</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">// 等同于</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">// import { onCaptureScreen, offCaptureScreen } from &quot;@/uni_modules/uni-getbatteryinfo&quot;;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">// uni.onUserCaptureScreen = onCaptureScreen</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">// uni.offUserCaptureScreen = offCaptureScreen</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ul><li>指定支持的运行环境</li></ul><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">uni_modules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">uni-ext-api</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">uni</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">request</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&quot;</span><span style="color:#916B53;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">request</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 可选别名配置</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&quot;</span><span style="color:#916B53;">app</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#676E95;font-style:italic;">// 表示在app平台，仅在iOS swift环境下生效</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#82AAFF;">js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#82AAFF;">kotlin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#82AAFF;">swift</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><strong>注意：</strong></p>`,58),c=s("ul",null,[s("li",null,[s("p",null,"所有 uni ext api 均需要提供 utssdk/interface.uts 文件")]),s("li",null,[s("p",null,"所有对外暴露的方法，类型均需要在 interface.uts 中定义")]),s("li",null,[s("p",null,"在具体平台实现中，通过引用 interface.uts 中的定义的方法，类型来约束实现")]),s("li",{"level:10,..":""},[s("p",null,"声明对象字面量时，必须指定具体类型，如：const res:GetBatteryInfoSuccess =")]),s("li",null,[s("p",null,"命名规范："),s("ul",null,[s("li",null,[n("API入参类型命名为"),s("code",null,"API名称首字母大写 + 'Options'"),n("，")])]),s("blockquote",null,[s("p",null,[n("如 uni.getBatteryInfo(options)，则 options 类型命名为："),s("code",null,"type GetBatteryInfoOptions = {}")])]),s("ul",null,[s("li",null,[n("异步API success,fail 回调结果类型命名为"),s("code",null,"API名称首字母大写 + 'Success'"),n(" 和 "),s("code",null,"API名称首字母大写 + 'Fail'")])]),s("blockquote",null,[s("p",null,[n("如 uni.getBatteryInfo() 的 success,fail 回调结果类型为："),s("code",null,"type GetBatteryInfoSuccess = {}"),n(" 和 "),s("code",null,"type GetBatteryInfoFail = {}")])]),s("ul",null,[s("li",null,[n("事件API 回调结果类型命名为"),s("code",null,"API名称首字母大写 + 'CallbackResult'")])]),s("blockquote",null,[s("p",null,[n("如 uni.onUserCaptureScreen 的 callback 回调结果类型为："),s("code",null,"type OnUserCaptureScreenCallbackResult = {}")])])]),s("li",null,[s("p",null,[s("a",{href:"https://gitcode.net/dcloud/uni-api/-/tree/dev/uni_modules/uni-getbatteryinfo",target:"_blank",rel:"noreferrer"},"示例(获取电量)参考")])])],-1),r=a('<h2 id="如何使用uni-ext-api" tabindex="-1">如何使用uni ext api <a class="header-anchor" href="#如何使用uni-ext-api" aria-label="Permalink to &quot;如何使用uni ext api&quot;">​</a></h2><p>在<a href="https://ext.dcloud.net.cn/" target="_blank" rel="noreferrer">插件市场</a>查找<code>uni ext api</code>插件，导入<code>HBuilderX</code>中的项目即可直接使用。</p><p>如：<a href="https://ext.dcloud.net.cn/plugin?name=uni-getbatteryinfo" target="_blank" rel="noreferrer">uni-getbatteryinfo</a>，导入后，即可直接使用<code>uni.getBatteryInfo</code></p>',3),C=[t,c,r];function D(y,i,u,A,F,d){return o(),p("div",null,C)}const B=l(e,[["render",D]]);export{g as __pageData,B as default};
