import{_ as s,c as t,o as a,N as l}from"./chunks/framework.fc67cb9d.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"guide/compile.md","lastUpdated":1685603474000}'),n={name:"guide/compile.md"},e=l(`<h4 id="什么是编译器" tabindex="-1">什么是编译器 <a class="header-anchor" href="#什么是编译器" aria-label="Permalink to &quot;什么是编译器&quot;">​</a></h4><p><code>uni-app</code>能实现一套代码、多端运行，核心是通过<code>编译器 + 运行时</code>实现的：</p><ul><li>编译器：将<code>uni-app</code>统一代码编译生成每个平台支持的特有代码；如在小程序平台，编译器将<code>.vue</code>文件拆分生成<code>wxml</code>、<code>wxss</code>、<code>js</code>等代码。</li><li>运行时：动态处理数据绑定、事件代理，保证Vue和平台宿主数据的一致性；</li><li>vue3：<code>uni-app</code>编译器基于Vite实现，编译速度更快，详见：<a href="https://ask.dcloud.net.cn/article/39628" target="_blank" rel="noreferrer">vue3和vite双向加持，uni-app性能再次提升</a></li></ul><h2 id="跨端兼容" tabindex="-1">跨端兼容 <a class="header-anchor" href="#跨端兼容" aria-label="Permalink to &quot;跨端兼容&quot;">​</a></h2><p>uni-app 已将常用的组件、JS API 封装到框架中，开发者按照 uni-app 规范开发即可保证多平台兼容，大部分业务均可直接满足。</p><p>但每个平台有自己的一些特性，因此会存在一些无法跨平台的情况。</p><ul><li>大量写 if else，会造成代码执行性能低下和管理混乱。</li><li>编译到不同的工程后二次修改，会让后续升级变的很麻烦。</li></ul><p>在 C 语言中，通过 #ifdef、#ifndef 的方式，为 windows、mac 等不同 os 编译不同的代码。 <code>uni-app</code> 参考这个思路，为 <code>uni-app</code> 提供了条件编译手段，在一个工程里优雅的完成了平台个性化实现。</p><h2 id="条件编译-preprocessor" tabindex="-1">条件编译@preprocessor <a class="header-anchor" href="#条件编译-preprocessor" aria-label="Permalink to &quot;条件编译@preprocessor&quot;">​</a></h2><p>条件编译是用特殊的注释作为标记，在编译时根据这些特殊的注释，将注释里面的代码编译到不同平台。</p><p>**写法：**以 <span style="color:#859900;"> #ifdef</span> 或 <span style="color:#859900;"> #ifndef</span> 加<b style="color:#268BD2;"> %PLATFORM%</b> 开头，以 <span style="color:#859900;">#endif</span> 结尾。</p><ul><li><span style="color:#859900;"> #ifdef</span>：if defined 仅在某平台存在</li><li><span style="color:#859900;"> #ifndef</span>：if not defined 除了某平台均存在</li><li><b style="color:#268BD2;"> %PLATFORM%</b>：平台名称</li></ul><table><thead><tr><th>条件编译写法</th><th>说明</th></tr></thead><tbody><tr><td><div class="code"><span class="token comment"><span style="color:#859900;"> #ifdef</span><b style="color:#268BD2;"> APP-PLUS</b></span><br>需条件编译的代码<br><span class="token comment"><span style="color:#859900;"> #endif</span></span></div></td><td>仅出现在 App 平台下的代码</td></tr><tr><td><div class="code"><span class="token comment"><span style="color:#859900;"> #ifndef</span><b style="color:#268BD2;"> H5</b></span><br>需条件编译的代码<br><span class="token comment"><span style="color:#859900;"> #endif</span></span></div></td><td>除了 H5 平台，其它平台均存在的代码</td></tr><tr><td><div class="code"><span class="token comment"><span style="color:#859900;"> #ifdef</span><b style="color:#268BD2;"> H5</b></span><span style="color:#859900;"> || </span><b style="color:#268BD2;">MP-WEIXIN</b><br>需条件编译的代码<br><span class="token comment"><span style="color:#859900;"> #endif</span></span></div></td><td>在 H5 平台或微信小程序平台存在的代码（这里只有||，不可能出现&amp;&amp;，因为没有交集）</td></tr></tbody></table><p><b style="color:#268BD2;"> %PLATFORM%</b> <strong>可取值如下：</strong></p><table><thead><tr><th style="text-align:left;">值</th><th style="text-align:left;">生效条件</th></tr></thead><tbody><tr><td style="text-align:left;">VUE3</td><td style="text-align:left;">HBuilderX 3.2.0+ <a href="https://ask.dcloud.net.cn/article/37834" target="_blank" rel="noreferrer">详情</a></td></tr><tr><td style="text-align:left;">APP-PLUS</td><td style="text-align:left;">App</td></tr><tr><td style="text-align:left;">APP-PLUS-NVUE或APP-NVUE</td><td style="text-align:left;">App nvue 页面</td></tr><tr><td style="text-align:left;">APP-ANDROID</td><td style="text-align:left;">App Android 平台 仅限 uts文件</td></tr><tr><td style="text-align:left;">APP-IOS</td><td style="text-align:left;">App iOS 平台 仅限 uts文件</td></tr><tr><td style="text-align:left;">H5</td><td style="text-align:left;">H5</td></tr><tr><td style="text-align:left;">MP-WEIXIN</td><td style="text-align:left;">微信小程序</td></tr><tr><td style="text-align:left;">MP-ALIPAY</td><td style="text-align:left;">支付宝小程序</td></tr><tr><td style="text-align:left;">MP-BAIDU</td><td style="text-align:left;">百度小程序</td></tr><tr><td style="text-align:left;">MP-TOUTIAO</td><td style="text-align:left;">字节跳动小程序</td></tr><tr><td style="text-align:left;">MP-LARK</td><td style="text-align:left;">飞书小程序</td></tr><tr><td style="text-align:left;">MP-QQ</td><td style="text-align:left;">QQ小程序</td></tr><tr><td style="text-align:left;">MP-KUAISHOU</td><td style="text-align:left;">快手小程序</td></tr><tr><td style="text-align:left;">MP-JD</td><td style="text-align:left;">京东小程序</td></tr><tr><td style="text-align:left;">MP-360</td><td style="text-align:left;">360小程序</td></tr><tr><td style="text-align:left;">MP</td><td style="text-align:left;">微信小程序/支付宝小程序/百度小程序/字节跳动小程序/飞书小程序/QQ小程序/360小程序</td></tr><tr><td style="text-align:left;">QUICKAPP-WEBVIEW</td><td style="text-align:left;">快应用通用(包含联盟、华为)</td></tr><tr><td style="text-align:left;">QUICKAPP-WEBVIEW-UNION</td><td style="text-align:left;">快应用联盟</td></tr><tr><td style="text-align:left;">QUICKAPP-WEBVIEW-HUAWEI</td><td style="text-align:left;">快应用华为</td></tr></tbody></table><p><strong>支持的文件</strong></p><ul><li>.vue</li><li>.js</li><li>.css</li><li>pages.json</li><li>各预编译语言文件，如：.scss、.less、.stylus、.ts、.pug</li></ul><p><strong>注意：</strong></p><ul><li><p>条件编译是利用注释实现的，在不同语法里注释写法不一样，js使用 <code>// 注释</code>、css 使用 <code>/* 注释 */</code>、vue/nvue 模板里使用 <code>&lt;!-- 注释 --&gt;</code>；</p></li><li><p>条件编译APP-PLUS包含APP-NVUE和APP-VUE，APP-PLUS-NVUE和APP-NVUE没什么区别，为了简写后面出了APP-NVUE ；</p></li><li><p>使用条件编译请保证<code>编译前</code>和<code>编译后</code>文件的语法正确性，即要保障无论条件编译是否生效都能通过语法校验。比如：json文件中不能有多余的逗号，js中不能重复导入；</p><p>::: preview</p><blockquote><p>JSON 错误示例</p></blockquote><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// #ifdef MP-WEIXIN</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// #endif</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><blockquote><p>JSON 正确示例</p></blockquote><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// #ifdef MP-WEIXIN</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// #endif</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>:::</p><p>::: preview</p><blockquote><p>JS 错误示例</p></blockquote><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// #ifdef MP-WEIXIN</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a/wx</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// #endif</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// #ifndef MP-WEIXIN</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a/index</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// #endif</span></span>
<span class="line"></span></code></pre></div><blockquote><p>JS 正确示例</p></blockquote><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// #ifdef MP-WEIXIN</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#A6ACCD;"> aWx </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a/wx</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// #endif</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// #ifndef MP-WEIXIN</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#A6ACCD;"> aIndex </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a/index</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// #endif</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> a</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// #ifdef MP-WEIXIN</span></span>
<span class="line"><span style="color:#A6ACCD;">a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> aWx</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// #endif</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// #ifndef MP-WEIXIN</span></span>
<span class="line"><span style="color:#A6ACCD;">a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> aIndex</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// #endif</span></span>
<span class="line"></span></code></pre></div><p>:::</p></li><li><p><code>VUE3</code> 需要在项目的 <code>manifest.json</code> 文件根节点配置 <code>&quot;vueVersion&quot; : &quot;3&quot;</code></p></li></ul><h3 id="api-的条件编译" tabindex="-1">API 的条件编译 <a class="header-anchor" href="#api-的条件编译" aria-label="Permalink to &quot;API 的条件编译&quot;">​</a></h3><pre data-lang="javascript"><code class="lang-javascript code"><span class="token comment">//<span style="color:#859900;"> #ifdef</span><b style="color:#268BD2;">  %PLATFORM%</b></span>
平台特有的API实现
<span class="token comment">//<span style="color:#859900;"> #endif</span></span></code></pre><p>示例，如下代码仅在 App 下出现:</p><p><img src="https://web-assets.dcloud.net.cn/unidoc/zh/platform-7.png" alt=""></p><p>示例，如下代码不会在 H5 平台上出现：</p><p><img src="https://web-assets.dcloud.net.cn/unidoc/zh/platform-6.png" alt=""></p><p>除了支持单个平台的条件编译外，还支持<strong>多平台</strong>同时编译，使用 || 来分隔平台名称。</p><p>示例，如下代码会在 App 和 H5 平台上出现：</p><p><img src="https://web-assets.dcloud.net.cn/unidoc/zh/platform-5.png" alt=""></p><h3 id="组件的条件编译" tabindex="-1">组件的条件编译 <a class="header-anchor" href="#组件的条件编译" aria-label="Permalink to &quot;组件的条件编译&quot;">​</a></h3><pre data-lang="html"><code class="lang-html code"><span class="token comment">&lt;!-- <span style="color:#859900;"> #ifdef</span><b style="color:#268BD2;">  %PLATFORM%</b> --&gt;</span>
平台特有的组件
<span class="token comment">&lt;!-- <span style="color:#859900;"> #endif</span> --&gt;</span></code></pre><p>示例，如下公众号关注组件仅会在微信小程序中出现：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">微信公众号关注组件</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">&lt;!-- uni-app未封装，但可直接使用微信原生的official-account组件--&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">&lt;!-- #ifdef MP-WEIXIN --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">official-account</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">official-account</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		    </span><span style="color:#676E95;font-style:italic;">&lt;!-- #endif --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="样式的条件编译" tabindex="-1">样式的条件编译 <a class="header-anchor" href="#样式的条件编译" aria-label="Permalink to &quot;样式的条件编译&quot;">​</a></h3><pre data-lang="css"><code class="lang-css code"><span class="token comment">/* <span style="color:#859900;"> #ifdef</span><b style="color:#268BD2;">  %PLATFORM% </b> */</span>
平台特有样式
<span class="token comment">/* <span style="color:#859900;"> #endif </span> */</span></code></pre><p><strong>注意：</strong> 样式的条件编译，无论是 css 还是 sass/scss/less/stylus 等预编译语言中，必须使用 <code>/*注释*/</code> 的写法。</p><p>正确写法</p><p><img src="https://web-assets.dcloud.net.cn/unidoc/zh/platform-2.png" alt=""></p><p>错误写法</p><p><img src="https://web-assets.dcloud.net.cn/unidoc/zh/platform-3.png" alt=""></p><h3 id="pages-json-的条件编译" tabindex="-1">pages.json 的条件编译 <a class="header-anchor" href="#pages-json-的条件编译" aria-label="Permalink to &quot;pages.json 的条件编译&quot;">​</a></h3><p>下面的页面，只有运行至 App 时才会编译进去。</p><p><img src="https://web-assets.dcloud.net.cn/unidoc/zh/platform-4.png" alt=""></p><p>不同平台下的特有功能，以及小程序平台的分包，都可以通过 pages.json 的条件编译来更好地实现。这样，就不会在其它平台产生多余的资源，进而减小包体积。</p><p>json的条件编译，如不同平台的key名称相同，cli项目下开发者自己安装的校验器会报错，需自行关闭这些校验器对json相同key的校验规则。如果使用HBuilderX的校验器，无需在意此问题，HBuilderX的语法校验器为此优化过。</p><h3 id="static-目录的条件编译" tabindex="-1">static 目录的条件编译 <a class="header-anchor" href="#static-目录的条件编译" aria-label="Permalink to &quot;static 目录的条件编译&quot;">​</a></h3><p>在不同平台，引用的静态资源可能也存在差异，通过 static 的条件编译可以解决此问题，static 目录下新建不同平台的专有目录，</p><table><thead><tr><th style="text-align:center;">目录名称</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">app-plus</td><td style="text-align:center;">App</td></tr><tr><td style="text-align:center;">h5</td><td style="text-align:center;">H5</td></tr><tr><td style="text-align:center;">mp-weixin</td><td style="text-align:center;">微信小程序</td></tr><tr><td style="text-align:center;">mp-alipay</td><td style="text-align:center;">支付宝小程序</td></tr><tr><td style="text-align:center;">mp-baidu</td><td style="text-align:center;">百度小程序</td></tr><tr><td style="text-align:center;">mp-qq</td><td style="text-align:center;">QQ小程序</td></tr><tr><td style="text-align:center;">mp-toutiao</td><td style="text-align:center;">字节小程序</td></tr><tr><td style="text-align:center;">mp-lark</td><td style="text-align:center;">飞书小程序</td></tr><tr><td style="text-align:center;">mp-kuaishou</td><td style="text-align:center;">快手小程序</td></tr><tr><td style="text-align:center;">mp-jd</td><td style="text-align:center;">京东小程序</td></tr></tbody></table><p>专有目录下的静态资源只有在特定平台才会编译进去。</p><p>如以下目录结构，<code>a.png</code> 只有在微信小程序平台才会编译进去，<code>b.png</code> 在所有平台都会被编译。</p><pre data-lang="">	<code class="lang-" style="padding:0;">
┌─static
│  ├─mp-weixin
│  │  └─a.png
│  └─b.png
├─main.js
├─App.vue
├─manifest.json
└─pages.json
	</code>
</pre><h3 id="整体目录条件编译" tabindex="-1">整体目录条件编译 <a class="header-anchor" href="#整体目录条件编译" aria-label="Permalink to &quot;整体目录条件编译&quot;">​</a></h3><p>如果想把各平台的页面文件更彻底的分开，也可以在uni-app项目根目录创建<code>platforms</code>目录，然后在下面进一步创建<code>app-plus</code>、<code>mp-weixin</code>等子目录，存放不同平台的文件。</p><p><strong>注意</strong></p><ul><li><code>platforms</code>目录下只支持放置页面文件（即页面vue文件），如果需要对其他资源条件编译，建议使用<a href="https://uniapp.dcloud.net.cn/tutorial/platform.html#static-%E7%9B%AE%E5%BD%95%E7%9A%84%E6%9D%A1%E4%BB%B6%E7%BC%96%E8%AF%91" target="_blank" rel="noreferrer">static 目录的条件编译</a>。</li></ul><h3 id="uts-的条件编译" tabindex="-1">uts 的条件编译 <a class="header-anchor" href="#uts-的条件编译" aria-label="Permalink to &quot;uts 的条件编译&quot;">​</a></h3><p>用法与 <a href="#api-的条件编译">API 的条件编译</a>一致，多出了<code>APP-ANDROID</code>和<code>APP-IOS</code>两个平台。</p><pre data-lang="javascript"><code class="lang-javascript code"><span class="token comment">//<span style="color:#859900;"> #ifdef</span><b style="color:#268BD2;">  %PLATFORM%</b></span>
平台特有的API实现
<span class="token comment">//<span style="color:#859900;"> #endif</span></span></code></pre><h3 id="hbuilderx-支持" tabindex="-1">HBuilderX 支持 <a class="header-anchor" href="#hbuilderx-支持" aria-label="Permalink to &quot;HBuilderX 支持&quot;">​</a></h3><p>HBuilderX 为 <code>uni-app</code> 的条件编译提供了丰富的支持:</p><p><strong>代码块支持</strong></p><p>在 HBuilderX 中开发 <code>uni-app</code> 时，通过输入 <strong>ifdef</strong> 可快速生成条件编译的代码片段</p><p><img src="https://web-assets.dcloud.net.cn/unidoc/zh/uni-022402.png" alt=""></p><p><strong>语法高亮</strong></p><p>在 HBuilderX 中对条件编译的代码注释部分提供了语法高亮，可分辨出写法是否正确，使得代码更加清晰（独立js文件需在编辑器右下角切换javascript es6+编辑器，独立css文件暂不支持高亮，但不高亮不影响使用）</p><p><img src="https://web-assets.dcloud.net.cn/unidoc/zh/uni-012403.png" alt=""></p><p><strong>正确注释和快速选中</strong></p><p>在 HBuilderX 中，ctrl+alt+/ 即可生成正确注释（js：<code>// 注释</code>、css：<code>/* 注释 */</code>、vue/nvue模板： <code>&lt;!-- 注释 --&gt;</code>）。</p><p><img src="https://web-assets.dcloud.net.cn/unidoc/zh/uni2019012801.png" alt=""></p><p>点击 <strong>ifdef</strong> 或 <strong>endif</strong> 可快速选中条件编译部分；点击左侧的折叠图标，可折叠条件编译部分代码。</p><p><img src="https://web-assets.dcloud.net.cn/unidoc/zh/uni-012501.png" alt=""></p><h3 id="注意" tabindex="-1">注意 <a class="header-anchor" href="#注意" aria-label="Permalink to &quot;注意&quot;">​</a></h3><ul><li>Android 和 iOS 平台不支持通过条件编译来区分，如果需要区分 Android、iOS 平台，请通过调用 uni.getSystemInfo 来获取平台信息。支持<code>ifios</code>、<code>ifAndroid</code>代码块，可方便编写判断。</li><li>有些跨端工具可以提供js的条件编译或多态，但这对于实际开发远远不够。uni-app不止是处理js，任何代码都可以多端条件编译，才能真正解决实际项目的跨端问题。另外所谓多态在实际开发中会造成大量冗余代码，很不利于复用和维护。举例，微信小程序主题色是绿色，而百度支付宝小程序是蓝色，你的应用想分平台适配颜色，只有条件编译是代码量最低、最容易维护的。</li><li>有些公司的产品运营总是给不同平台提不同需求，但这不是拒绝uni-app的理由。关键在于项目里，复用的代码多还是个性的代码多，正常都是复用的代码多，所以仍然应该多端。而个性的代码放到不同平台的目录下，差异化维护。</li></ul>`,72),p=[e];function o(c,r,i,d,y,f){return a(),t("div",null,p)}const g=s(n,[["render",o]]);export{u as __pageData,g as default};
