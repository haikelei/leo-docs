import{_ as l,c as a,o as n,N as e,x as t,a as d}from"./chunks/framework.fc67cb9d.js";const _=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"api/media/camera-context.md","lastUpdated":1685603474000}'),r={name:"api/media/camera-context.md"},s=e('<h3 id="uni-createcameracontext" tabindex="-1">uni.createCameraContext() <a class="header-anchor" href="#uni-createcameracontext" aria-label="Permalink to &quot;uni.createCameraContext()&quot;">​</a></h3><p>创建并返回 camera 组件的上下文 cameraContext 对象。</p><p><strong>平台差异说明</strong></p><table><thead><tr><th style="text-align:center;">App</th><th style="text-align:center;">H5</th><th style="text-align:center;">微信小程序</th><th style="text-align:center;">支付宝小程序</th><th style="text-align:center;">百度小程序</th><th style="text-align:center;">字节跳动小程序</th><th style="text-align:center;">飞书小程序</th><th style="text-align:center;">QQ小程序</th><th style="text-align:center;">快手小程序</th><th style="text-align:center;">京东小程序</th></tr></thead><tbody><tr><td style="text-align:center;">x</td><td style="text-align:center;">x</td><td style="text-align:center;">√</td><td style="text-align:center;">√</td><td style="text-align:center;">√</td><td style="text-align:center;">√</td><td style="text-align:center;">x</td><td style="text-align:center;">√</td><td style="text-align:center;">√</td><td style="text-align:center;">√</td></tr></tbody></table><p>本API为 camera 组件配套的js API，与 camera 组件的平台兼容性相同，可实现非全屏摄像头。App端可通过<a href="https://www.html5plus.org/doc/zh_cn/camera.html" target="_blank" rel="noreferrer">plus.camera</a>实现全屏摄像头。</p><p><strong>cameraContext 对象的方法列表</strong></p><table><thead><tr><th style="text-align:left;">方法</th><th style="text-align:left;">参数</th><th style="text-align:left;">说明</th><th style="text-align:left;">平台差异说明</th></tr></thead><tbody><tr><td style="text-align:left;">takePhoto</td><td style="text-align:left;">Object</td><td style="text-align:left;">拍照，可指定质量，成功则返回图片路径。</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">setZoom</td><td style="text-align:left;">Object</td><td style="text-align:left;">设置缩放级别。</td><td style="text-align:left;">百度、QQ、快手、京东小程序不支持</td></tr><tr><td style="text-align:left;">startRecord</td><td style="text-align:left;">Object</td><td style="text-align:left;">开始录像</td><td style="text-align:left;">京东小程序不支持</td></tr><tr><td style="text-align:left;">stopRecord</td><td style="text-align:left;">Object</td><td style="text-align:left;">结束录像，成功则返回封面与视频。</td><td style="text-align:left;">京东小程序不支持</td></tr><tr><td style="text-align:left;">onCameraFrame</td><td style="text-align:left;">Function</td><td style="text-align:left;">获取 Camera 实时帧数据。</td><td style="text-align:left;">微信小程序<a href="https://developers.weixin.qq.com/miniprogram/dev/api/CameraContext.onCameraFrame.html" target="_blank" rel="noreferrer">详情</a>、支付宝小程序<a href="https://opendocs.alipay.com/mini/03qitt" target="_blank" rel="noreferrer">详情</a>、字节小程序支持<a href="https://developer.open-douyin.com/docs/resource/zh-CN/mini-app/develop/api/media/camera/camera-context/camera-context-on-camera-frame" target="_blank" rel="noreferrer">详情</a></td></tr></tbody></table><h3 id="cameracontext-takephoto" tabindex="-1">cameraContext.takePhoto <a class="header-anchor" href="#cameracontext-takephoto" aria-label="Permalink to &quot;cameraContext.takePhoto&quot;">​</a></h3><p><strong>takePhoto 的 Object 参数列表：</strong></p>',9),i=t("table",null,[t("thead",null,[t("tr",null,[t("th",{style:{"text-align":"left"}},"参数"),t("th",{style:{"text-align":"left"}},"类型"),t("th",{style:{"text-align":"left"}},"必填"),t("th",{style:{"text-align":"left"}},"说明")])]),t("tbody",null,[t("tr",null,[t("td",{style:{"text-align":"left"}},"quality"),t("td",{style:{"text-align":"left"}},"String"),t("td",{style:{"text-align":"left"}},"否"),t("td",{style:{"text-align":"left"}},"成像质量，值为high（高质量）、normal（普通质量）、low（低质量），默认normal")]),t("tr",null,[t("td",{style:{"text-align":"left"}},"selfieMirror"),t("td",{style:{"text-align":"left"}},"Boolean"),t("td",{style:{"text-align":"left"}},"否"),t("td",{style:{"text-align":"left"}},[d("是否开启镜像，默认true。"),t("strong",null,"仅微信小程序 2.22.0+ 支持")])]),t("tr",{tempImagePath:""},[t("td",{style:{"text-align":"left"}},"success"),t("td",{style:{"text-align":"left"}},"Function"),t("td",{style:{"text-align":"left"}},"否"),t("td",{style:{"text-align":"left"}},"接口调用成功的回调函数 ，返回照片文件的临时路径，res =")]),t("tr",null,[t("td",{style:{"text-align":"left"}},"fail"),t("td",{style:{"text-align":"left"}},"Function"),t("td",{style:{"text-align":"left"}},"否"),t("td",{style:{"text-align":"left"}},"接口调用失败的回调函数")]),t("tr",null,[t("td",{style:{"text-align":"left"}},"complete"),t("td",{style:{"text-align":"left"}},"Function"),t("td",{style:{"text-align":"left"}},"否"),t("td",{style:{"text-align":"left"}},"接口调用结束的回调函数（调用成功、失败都会执行）")])])],-1),o=e('<h3 id="cameracontext-setzoom" tabindex="-1">cameraContext.setZoom <a class="header-anchor" href="#cameracontext-setzoom" aria-label="Permalink to &quot;cameraContext.setZoom&quot;">​</a></h3><p><strong>setZoom 的 Object 参数列表：</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">必填</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">zoom</td><td style="text-align:left;">String</td><td style="text-align:left;">是</td><td style="text-align:left;">缩放级别，范围[1, maxZoom]。zoom 可取小数，精确到小数后一位。maxZoom 可在 @initdone 返回值中获取。</td></tr><tr><td style="text-align:left;">success</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用成功的回调函数</td></tr><tr><td style="text-align:left;">fail</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用失败的回调函数</td></tr><tr><td style="text-align:left;">complete</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table><h3 id="cameracontext-startrecord" tabindex="-1">cameraContext.startRecord <a class="header-anchor" href="#cameracontext-startrecord" aria-label="Permalink to &quot;cameraContext.startRecord&quot;">​</a></h3><p><strong>startRecord 的 Object 参数列表：</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">必填</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">timeoutCallback</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接超过30s或页面 onHide 时会结束录像</td></tr><tr><td style="text-align:left;">timeout</td><td style="text-align:left;">Number</td><td style="text-align:left;">否</td><td style="text-align:left;">录制时长上限，单位为秒，默认30s。微信小程序最长不能超过 5 分钟，支付宝小程序最大录制时长 10 分钟。<strong>仅微信2.22.0+ 、支付宝1.11.0+小程序支持</strong></td></tr><tr><td style="text-align:left;">selfieMirror</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">否</td><td style="text-align:left;">是否开启镜像，默认true。<strong>仅微信小程序 2.22.0+ 支持</strong></td></tr><tr><td style="text-align:left;">success</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用成功的回调函数</td></tr><tr><td style="text-align:left;">fail</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用失败的回调函数</td></tr><tr><td style="text-align:left;">complete</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table><h3 id="cameracontext-stoprecord" tabindex="-1">cameraContext.stopRecord <a class="header-anchor" href="#cameracontext-stoprecord" aria-label="Permalink to &quot;cameraContext.stopRecord&quot;">​</a></h3><p><strong>stopRecord 的 Object 参数列表：</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">类型</th><th style="text-align:left;">默认值</th><th style="text-align:left;">必填</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">compressed</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">false</td><td style="text-align:left;">否</td><td style="text-align:left;">启动视频压缩，压缩效果同 <code>chooseVideo</code> 。微信2.10.0+ 、字节2.41.0（Android暂不支持）、快手小程序支持</td></tr><tr><td style="text-align:left;">success</td><td style="text-align:left;">Function</td><td style="text-align:left;"></td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用成功的回调函数 ，返回封面与视频的临时路径，res = { tempThumbPath, tempVideoPath }。</td></tr><tr><td style="text-align:left;">fail</td><td style="text-align:left;">Function</td><td style="text-align:left;"></td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用失败的回调函数</td></tr><tr><td style="text-align:left;">complete</td><td style="text-align:left;">Function</td><td style="text-align:left;"></td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table><p><strong>注意</strong></p><ul><li>App下实现OCR等证件识别等需求，可在插件市场获取原生插件，<a href="https://ext.dcloud.net.cn/plugin?id=135" target="_blank" rel="noreferrer">https://ext.dcloud.net.cn/plugin?id=135</a></li><li>微信小程序下实现OCR等证件识别等需求，插件市场也有封装，搜索 <a href="https://ext.dcloud.net.cn/search?q=ocr" target="_blank" rel="noreferrer">ocr</a> 可见。</li><li>可以通过用户授权API来判断用户是否给应用授予摄像头的访问权限<a href="https://uniapp.dcloud.io/api/other/authorize" target="_blank" rel="noreferrer">https://uniapp.dcloud.io/api/other/authorize</a></li><li>各家小程序平台对API的实现情况可能不一致，比如支付宝小程序调用createCameraContext时需要传参cameraId，使用时请以具体文档为准。</li><li>支付宝小程序开发者工具（IDE）暂不支持调试此 API，请使用真机调试功能在真机进行调试。</li></ul>',11),x=[s,i,o];function g(c,f,y,h,m,p){return n(),a("div",null,x)}const b=l(r,[["render",g]]);export{_ as __pageData,b as default};
