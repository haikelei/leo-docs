import{_ as t,c as s,o as l,N as e}from"./chunks/framework.fc67cb9d.js";const g=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"api/system/barcode.md","lastUpdated":1685603474000}'),n={name:"api/system/barcode.md"},a=e(`<h3 id="uni-scancode-object" tabindex="-1">uni.scanCode(OBJECT) <a class="header-anchor" href="#uni-scancode-object" aria-label="Permalink to &quot;uni.scanCode(OBJECT)&quot;">​</a></h3><p>调起客户端扫码界面，扫码成功后返回对应的结果。</p><p><strong>平台差异说明</strong></p><table><thead><tr><th style="text-align:center;">App</th><th style="text-align:center;">H5</th><th style="text-align:center;">微信小程序</th><th style="text-align:center;">支付宝小程序</th><th style="text-align:center;">百度小程序</th><th style="text-align:center;">字节跳动小程序、飞书小程序</th><th style="text-align:center;">QQ小程序</th><th style="text-align:center;">快手小程序</th><th style="text-align:center;">京东小程序</th></tr></thead><tbody><tr><td style="text-align:center;">√</td><td style="text-align:center;">x</td><td style="text-align:center;">√</td><td style="text-align:center;">√</td><td style="text-align:center;">√</td><td style="text-align:center;">√</td><td style="text-align:center;">√</td><td style="text-align:center;">√</td><td style="text-align:center;">√</td></tr></tbody></table><p><strong>OBJECT 参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数名</th><th style="text-align:left;">类型</th><th style="text-align:left;">必填</th><th style="text-align:left;">说明</th><th style="text-align:center;">平台差异说明</th></tr></thead><tbody><tr><td style="text-align:left;">onlyFromCamera</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">否</td><td style="text-align:left;">是否只能从相机扫码，不允许从相册选择图片</td><td style="text-align:center;">字节跳动小程序、百度小程序、支付宝小程序不支持此参数</td></tr><tr><td style="text-align:left;">scanType</td><td style="text-align:left;">Array</td><td style="text-align:left;">否</td><td style="text-align:left;">扫码类型，参考下方<code>scanType的合法值</code></td><td style="text-align:center;">字节跳动小程序不支持此参数</td></tr><tr><td style="text-align:left;">autoDecodeCharset</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">否</td><td style="text-align:left;">是否启用自动识别字符编码功能，默认为否</td><td style="text-align:center;">App</td></tr><tr><td style="text-align:left;">autoZoom</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">否</td><td style="text-align:left;">是否启用自动放大，默认启用</td><td style="text-align:center;">仅 App-Android (3.5.4+) 支持</td></tr><tr><td style="text-align:left;">barCodeInput</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">否</td><td style="text-align:left;">是否支持手动输入条形码</td><td style="text-align:center;">仅飞书小程序（V3.14.0）支持</td></tr><tr><td style="text-align:left;">hideAlbum</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">否</td><td style="text-align:left;">是否隐藏相册（不允许从相册选择图片），只能从相机扫码。默认值为 false。</td><td style="text-align:center;">仅支付宝小程序支持</td></tr><tr><td style="text-align:left;">success</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用成功的回调，返回内容详见返回参数说明。</td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;">fail</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用失败的回调函数（识别失败、用户取消等情况下触发）</td><td style="text-align:center;"></td></tr><tr><td style="text-align:left;">complete</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">接口调用结束的回调函数（调用成功、失败都会执行）</td><td style="text-align:center;"> </td></tr></tbody></table><p><strong>scanType的合法值</strong></p><table><thead><tr><th style="text-align:left;">值</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">barCode</td><td style="text-align:left;">一维码</td></tr><tr><td style="text-align:left;">qrCode</td><td style="text-align:left;">二维码</td></tr><tr><td style="text-align:left;">datamatrix</td><td style="text-align:left;">Data Matrix 码</td></tr><tr><td style="text-align:left;">pdf417</td><td style="text-align:left;">PDF417 条码</td></tr></tbody></table><p><strong>success 返回参数说明</strong></p><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">说明</th><th style="text-align:left;">平台差异说明</th></tr></thead><tbody><tr><td style="text-align:left;">result</td><td style="text-align:left;">所扫码的内容</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">scanType</td><td style="text-align:left;">所扫码的类型</td><td style="text-align:left;">App、微信小程序、百度小程序、QQ小程序、京东小程序、支付宝小程序</td></tr><tr><td style="text-align:left;">charSet</td><td style="text-align:left;">所扫码的字符集</td><td style="text-align:left;">App、微信小程序、百度小程序(所扫码的字符集，仅支持 Android 系统)、QQ小程序、京东小程序</td></tr><tr><td style="text-align:left;">path</td><td style="text-align:left;">当所扫的码为当前应用的合法二维码时，会返回此字段，内容为二维码携带的 path。</td><td style="text-align:left;">微信小程序、QQ小程序、京东小程序</td></tr><tr><td style="text-align:left;">rawData</td><td style="text-align:left;">原始数据，base64 编码</td><td style="text-align:left;">微信小程序、QQ小程序、京东小程序、支付宝小程序</td></tr><tr><td style="text-align:left;">code</td><td style="text-align:left;">扫码所得数据</td><td style="text-align:left;">支付宝小程序</td></tr><tr><td style="text-align:left;">qrCode</td><td style="text-align:left;">扫描二维码时返回二维码数据</td><td style="text-align:left;">支付宝小程序</td></tr><tr><td style="text-align:left;">barCode</td><td style="text-align:left;">扫描条形码时返回条形码数据</td><td style="text-align:left;">支付宝小程序</td></tr><tr><td style="text-align:left;">imageChannel</td><td style="text-align:left;">来源</td><td style="text-align:left;">支付宝小程序</td></tr></tbody></table><p><strong>示例</strong></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 允许从相机和相册扫码</span></span>
<span class="line"><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">scanCode</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">success</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">条码类型：</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">scanType</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">条码内容：</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 只允许通过相机扫码</span></span>
<span class="line"><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">scanCode</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">onlyFromCamera</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">success</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">条码类型：</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">scanType</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">条码内容：</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 调起条码扫描</span></span>
<span class="line"><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">scanCode</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">scanType</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">barCode</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">success</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">条码类型：</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">scanType</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">		</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">条码内容：</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p><strong>Tip</strong></p><ul><li>App-vue如果想自定义扫码，可参考<a href="http://ask.dcloud.net.cn/article/35036" target="_blank" rel="noreferrer">uni-app中如何使用5+的原生界面控件</a>和<a href="https://www.html5plus.org/doc/zh_cn/barcode.html" target="_blank" rel="noreferrer">plus.barcode API</a></li><li>App-nvue，支持barcode组件，可自定义扫码界面。<a href="https://uniapp.dcloud.io/component/barcode" target="_blank" rel="noreferrer">详见</a>。App端自定义扫码界面，建议使用nvue方式。</li><li>App的扫码引擎，使用业内开源的通用扫码库，扫码效率比不过微信、支付宝等商业扫码库。如需更强的扫码效果，请使用支付宝提供的扫码插件：<a href="https://ext.dcloud.net.cn/plugin?id=2636" target="_blank" rel="noreferrer">https://ext.dcloud.net.cn/plugin?id=2636</a></li><li>微信小程序自定义扫码界面，可使用camera组件。<a href="https://uniapp.dcloud.io/component/camera" target="_blank" rel="noreferrer">详见</a></li><li>微信内嵌浏览器运行H5版时，可通过js sdk实现扫码，需要引入一个单独的js，<a href="https://ask.dcloud.net.cn/article/35380" target="_blank" rel="noreferrer">详见</a></li><li>在扫码界面点击返回也会进入 <code>fail</code> 回调中</li><li>支付宝小程序不支持 <code>success</code> 回调中的<code>charSet</code>，<code>path</code></li><li>HX 3.4.4之后版本 android 新增 检测到 QR 码时自动放大功能，提升扫码识别率。</li></ul>`,14),o=[a];function p(r,c,y,d,i,F){return l(),s("div",null,o)}const A=t(n,[["render",p]]);export{g as __pageData,A as default};
