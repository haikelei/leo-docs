import{_ as t,c as e,o as n,N as s}from"./chunks/framework.fc67cb9d.js";const h=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"api/other/requestSubscribeMessage.md","lastUpdated":1685603474000}'),r={name:"api/other/requestSubscribeMessage.md"},l=s(`<h3 id="uni-requestsubscribemessage-object-object" tabindex="-1">uni.requestSubscribeMessage(Object object) <a class="header-anchor" href="#uni-requestsubscribemessage-object-object" aria-label="Permalink to &quot;uni.requestSubscribeMessage(Object object)&quot;">​</a></h3><p><strong>平台差异说明</strong></p><table><thead><tr><th style="text-align:center;">App</th><th style="text-align:center;">H5</th><th style="text-align:center;">微信小程序</th><th style="text-align:center;">支付宝小程序</th><th style="text-align:center;">百度小程序</th><th style="text-align:center;">字节跳动小程序、飞书小程序</th><th style="text-align:center;">QQ小程序</th></tr></thead><tbody><tr><td style="text-align:center;">x</td><td style="text-align:center;">x</td><td style="text-align:center;">基础库版本&gt;=2.8.2</td><td style="text-align:center;">x</td><td style="text-align:center;">x</td><td style="text-align:center;">x</td><td style="text-align:center;">x</td></tr></tbody></table><p><strong>object参数说明</strong></p><table><thead><tr><th style="text-align:center;">属性</th><th style="text-align:center;">类型</th><th style="text-align:center;">默认值</th><th style="text-align:center;">必填</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">tmplIds</td><td style="text-align:center;">Array</td><td style="text-align:center;"></td><td style="text-align:center;">是</td><td style="text-align:center;">需要订阅的消息模板的id的集合，一次调用最多可订阅3条消息（注意：iOS客户端7.0.6版本、Android客户端7.0.7版本之后的一次性订阅/长期订阅才支持多个模板消息，iOS客户端7.0.5版本、Android客户端7.0.6版本之前的一次订阅只支持一个模板消息）消息模板id在[微信公众平台(mp.weixin.qq.com)-功能-订阅消息]中配置</td></tr><tr><td style="text-align:center;">success</td><td style="text-align:center;">function</td><td style="text-align:center;"></td><td style="text-align:center;">否</td><td style="text-align:center;">接口调用成功的回调函数</td></tr><tr><td style="text-align:center;">fail</td><td style="text-align:center;">function</td><td style="text-align:center;"></td><td style="text-align:center;">否</td><td style="text-align:center;">接口调用失败的回调函数</td></tr><tr><td style="text-align:center;">complete</td><td style="text-align:center;">function</td><td style="text-align:center;"></td><td style="text-align:center;">否</td><td style="text-align:center;">接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table><p><strong>注意</strong></p><ul><li>用户发生点击行为或者发起支付回调后，才可以调起订阅消息界面</li></ul><p><strong>平台说明</strong></p><ul><li><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/subscribe-message.html" target="_blank" rel="noreferrer">微信小程序订阅消息参考文档</a></li></ul><p><strong>object.success 返回值</strong></p><table><thead><tr><th style="text-align:center;">属性</th><th style="text-align:center;">类型</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">errMsg</td><td style="text-align:center;">String</td><td style="text-align:center;">接口调用成功时errMsg值为&#39;requestSubscribeMessage:ok&#39;</td></tr><tr><td style="text-align:center;">TEMPLATE_ID</td><td style="text-align:center;">String</td><td style="text-align:center;">[TEMPLATE_ID]是动态的键，即模板id，值包括&#39;accept&#39;、&#39;reject&#39;、&#39;ban&#39;。&#39;accept&#39;表示用户同意订阅该条id对应的模板消息，&#39;reject&#39;表示用户拒绝订阅该条id对应的模板消息，&#39;ban&#39;表示已被后台封禁。例如 { errMsg: &quot;requestSubscribeMessage:ok&quot;, zun-LzcQyW-edafCVvzPkK4de2Rllr1fFpw2A_x0oXE: &quot;accept&quot;} 表示用户同意订阅zun-LzcQyW-edafCVvzPkK4de2Rllr1fFpw2A_x0oXE这条消息</td></tr></tbody></table><p><strong>object.fail 返回值</strong></p><table><thead><tr><th style="text-align:center;">属性</th><th style="text-align:center;">类型</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">errMsg</td><td style="text-align:center;">String</td><td style="text-align:center;">接口调用失败错误信息</td></tr><tr><td style="text-align:center;">errCode</td><td style="text-align:center;">Number</td><td style="text-align:center;">接口调用失败错误码</td></tr></tbody></table><p><strong>示例代码</strong></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">uni.requestSubscribeMessage({</span></span>
<span class="line"><span style="color:#A6ACCD;">  tmplIds: [&#39;&#39;],</span></span>
<span class="line"><span style="color:#A6ACCD;">  success (res) { }</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div>`,15),a=[l];function c(d,i,o,g,y,x){return n(),e("div",null,a)}const b=t(r,[["render",c]]);export{h as __pageData,b as default};
