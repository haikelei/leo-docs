import{_ as t,c as l,o as s,N as e}from"./chunks/framework.fc67cb9d.js";const g=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"component/video.md","lastUpdated":1685603474000}'),n={name:"component/video.md"},a=e(`<h4 id="video" tabindex="-1">video <a class="header-anchor" href="#video" aria-label="Permalink to &quot;video&quot;">​</a></h4><p>视频播放组件。</p><p><strong>属性说明</strong></p><table><thead><tr><th style="text-align:left;">属性名</th><th style="text-align:left;">类型</th><th style="text-align:left;">默认值</th><th style="text-align:left;">说明</th><th style="text-align:left;">平台差异说明</th></tr></thead><tbody><tr><td style="text-align:left;">src</td><td style="text-align:left;">String</td><td style="text-align:left;"></td><td style="text-align:left;">要播放视频的资源地址</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">autoplay</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">false</td><td style="text-align:left;">是否自动播放</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">loop</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">false</td><td style="text-align:left;">是否循环播放</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">muted</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">false</td><td style="text-align:left;">是否静音播放</td><td style="text-align:left;">飞书小程序不支持</td></tr><tr><td style="text-align:left;">initial-time</td><td style="text-align:left;">Number</td><td style="text-align:left;"></td><td style="text-align:left;">指定视频初始播放位置，单位为秒（s）。</td><td style="text-align:left;">飞书小程序不支持</td></tr><tr><td style="text-align:left;">duration</td><td style="text-align:left;">Number</td><td style="text-align:left;"></td><td style="text-align:left;">指定视频时长，单位为秒（s）。</td><td style="text-align:left;">字节跳动小程序、飞书小程序、快手小程序、京东小程序不支持</td></tr><tr><td style="text-align:left;">controls</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">true</td><td style="text-align:left;">是否显示默认播放控件（播放/暂停按钮、播放进度、时间）</td><td style="text-align:left;">快手小程序不支持</td></tr><tr><td style="text-align:left;">danmu-list</td><td style="text-align:left;">Object Array</td><td style="text-align:left;"></td><td style="text-align:left;">弹幕列表</td><td style="text-align:left;">字节跳动小程序、飞书小程序、快手小程序、京东小程序不支持</td></tr><tr><td style="text-align:left;">danmu-btn</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">false</td><td style="text-align:left;">是否显示弹幕按钮，只在初始化时有效，不能动态变更</td><td style="text-align:left;">字节跳动小程序、飞书小程序、快手小程序、京东小程序不支持</td></tr><tr><td style="text-align:left;">enable-danmu</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">false</td><td style="text-align:left;">是否展示弹幕，只在初始化时有效，不能动态变更</td><td style="text-align:left;">字节跳动小程序、飞书小程序、快手小程序、京东小程序不支持</td></tr><tr><td style="text-align:left;">page-gesture</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">false</td><td style="text-align:left;">在非全屏模式下，是否开启亮度与音量调节手势</td><td style="text-align:left;">微信小程序、H5</td></tr><tr><td style="text-align:left;">direction</td><td style="text-align:left;">Number</td><td style="text-align:left;"></td><td style="text-align:left;">设置全屏时视频的方向，不指定则根据宽高比自动判断。有效值为 0（正常竖向）, 90（屏幕逆时针90度）, -90（屏幕顺时针90度）</td><td style="text-align:left;">H5、飞书小程序、快手小程序、京东小程序不支持</td></tr><tr><td style="text-align:left;">show-progress</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">true</td><td style="text-align:left;">若不设置，宽度大于240时才会显示</td><td style="text-align:left;">字节跳动小程序、飞书小程序、快手小程序、京东小程序不支持</td></tr><tr><td style="text-align:left;">show-fullscreen-btn</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">true</td><td style="text-align:left;">是否显示全屏按钮</td><td style="text-align:left;">京东小程序不支持</td></tr><tr><td style="text-align:left;">show-play-btn</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">true</td><td style="text-align:left;">是否显示视频底部控制栏的播放按钮</td><td style="text-align:left;">京东小程序不支持</td></tr><tr><td style="text-align:left;">show-center-play-btn</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">true</td><td style="text-align:left;">是否显示视频中间的播放按钮</td><td style="text-align:left;">字节跳动小程序、京东小程序不支持</td></tr><tr><td style="text-align:left;">show-loading</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">true</td><td style="text-align:left;">是否显示loading控件</td><td style="text-align:left;">仅app 2.8.12+</td></tr><tr><td style="text-align:left;">enable-progress-gesture</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">true</td><td style="text-align:left;">是否开启控制进度的手势</td><td style="text-align:left;">字节跳动小程序、京东小程序不支持</td></tr><tr><td style="text-align:left;">object-fit</td><td style="text-align:left;">String</td><td style="text-align:left;">contain</td><td style="text-align:left;">当视频大小与 video 容器大小不一致时，视频的表现形式。contain：包含，fill：填充，cover：覆盖</td><td style="text-align:left;">App、微信小程序、字节跳动小程序、飞书小程序、H5、京东小程序</td></tr><tr><td style="text-align:left;">poster</td><td style="text-align:left;">String</td><td style="text-align:left;"></td><td style="text-align:left;">视频封面的图片网络资源地址，如果 controls 属性值为 false 则设置 poster 无效</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">show-mute-btn</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">false</td><td style="text-align:left;">是否显示静音按钮</td><td style="text-align:left;">微信小程序、字节跳动小程序、App-nvue</td></tr><tr><td style="text-align:left;">title</td><td style="text-align:left;">String</td><td style="text-align:left;"></td><td style="text-align:left;">视频的标题，全屏时在顶部展示</td><td style="text-align:left;">微信小程序、App（3.6.7+）</td></tr><tr><td style="text-align:left;">play-btn-position</td><td style="text-align:left;">String</td><td style="text-align:left;">bottom</td><td style="text-align:left;">播放按钮的位置</td><td style="text-align:left;">微信小程序、字节跳动小程序、飞书小程序</td></tr><tr><td style="text-align:left;">mobilenet-hint-type</td><td style="text-align:left;">number</td><td style="text-align:left;">1</td><td style="text-align:left;">移动网络提醒样式：0是不提醒，1是提醒，默认值为1</td><td style="text-align:left;">京东小程序</td></tr><tr><td style="text-align:left;">enable-play-gesture</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">false</td><td style="text-align:left;">是否开启播放手势，即双击切换播放/暂停</td><td style="text-align:left;">微信小程序、快手小程序</td></tr><tr><td style="text-align:left;">auto-pause-if-navigate</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">true</td><td style="text-align:left;">当跳转到其它小程序页面时，是否自动暂停本页面的视频</td><td style="text-align:left;">微信小程序</td></tr><tr><td style="text-align:left;">auto-pause-if-open-native</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">true</td><td style="text-align:left;">当跳转到其它微信原生页面时，是否自动暂停本页面的视频</td><td style="text-align:left;">微信小程序</td></tr><tr><td style="text-align:left;">vslide-gesture</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">false</td><td style="text-align:left;">在非全屏模式下，是否开启亮度与音量调节手势（同 page-gesture）</td><td style="text-align:left;">微信小程序、App（3.4.0+）、快手小程序</td></tr><tr><td style="text-align:left;">vslide-gesture-in-fullscreen</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">true</td><td style="text-align:left;">在全屏模式下，是否开启亮度与音量调节手势</td><td style="text-align:left;">微信小程序、App（3.4.0+）、快手小程序</td></tr><tr><td style="text-align:left;">ad-unit-id</td><td style="text-align:left;">String</td><td style="text-align:left;"></td><td style="text-align:left;">视频前贴广告单元ID，更多详情可参考开放能力<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/ad/video-patch-ad.html" target="_blank" rel="noreferrer">视频前贴广告</a></td><td style="text-align:left;">微信小程序</td></tr><tr><td style="text-align:left;">poster-for-crawler</td><td style="text-align:left;">String</td><td style="text-align:left;"></td><td style="text-align:left;">用于给搜索等场景作为视频封面展示，建议使用无播放 icon 的视频封面图，只支持网络地址</td><td style="text-align:left;">微信小程序</td></tr><tr><td style="text-align:left;">codec</td><td style="text-align:left;">String</td><td style="text-align:left;">hardware</td><td style="text-align:left;">解码器选择，hardware：硬解码（硬解码可以增加解码算力，提高视频清晰度。少部分老旧硬件可能存在兼容性问题）；software：ffmpeg 软解码；</td><td style="text-align:left;">App-Android 3.1.0+</td></tr><tr><td style="text-align:left;">http-cache</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">true</td><td style="text-align:left;">是否对 http、https 视频源开启本地缓存。缓存策略:开启了此开关的视频源，在视频播放时会在本地保存缓存文件，如果本地缓存池已超过100M，在进行缓存前会清空之前的缓存（不适用于m3u8等流媒体协议）</td><td style="text-align:left;">App-Android 3.1.0+</td></tr><tr><td style="text-align:left;">play-strategy</td><td style="text-align:left;">Number</td><td style="text-align:left;">0</td><td style="text-align:left;">播放策略，0：普通模式，适合绝大部分视频播放场景；1：平滑播放模式（降级），增加缓冲区大小，采用open sl解码音频，避免音视频脱轨的问题，可能会降低首屏展现速度、视频帧率，出现开屏音频延迟等。 适用于高码率视频的极端场景；2： M3U8优化模式，增加缓冲区大小，提升视频加载速度和流畅度，可能会降低首屏展现速度。 适用于M3U8在线播放的场景</td><td style="text-align:left;">App-Android 3.1.0+</td></tr><tr><td style="text-align:left;">header</td><td style="text-align:left;">Object</td><td style="text-align:left;"></td><td style="text-align:left;">HTTP 请求 Header</td><td style="text-align:left;">App 3.1.19+</td></tr><tr><td style="text-align:left;">is-live</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">false</td><td style="text-align:left;">是否为直播源</td><td style="text-align:left;">App 3.7.2+、微信小程序（2.28.1+）</td></tr><tr><td style="text-align:left;">@play</td><td style="text-align:left;">EventHandle</td><td style="text-align:left;"></td><td style="text-align:left;">当开始/继续播放时触发play事件</td><td style="text-align:left;">飞书小程序不支持</td></tr><tr><td style="text-align:left;">@pause</td><td style="text-align:left;">EventHandle</td><td style="text-align:left;"></td><td style="text-align:left;">当暂停播放时触发 pause 事件</td><td style="text-align:left;">飞书小程序不支持</td></tr><tr><td style="text-align:left;">@ended</td><td style="text-align:left;">EventHandle</td><td style="text-align:left;"></td><td style="text-align:left;">当播放到末尾时触发 ended 事件</td><td style="text-align:left;">飞书小程序不支持</td></tr><tr><td style="text-align:left;">@timeupdate</td><td style="text-align:left;">EventHandle</td><td style="text-align:left;"></td><td style="text-align:left;">播放进度变化时触发，<code>event.detail = {currentTime, duration}</code> 。触发频率 250ms 一次</td><td style="text-align:left;">飞书小程序不支持</td></tr><tr><td style="text-align:left;">@fullscreenchange</td><td style="text-align:left;">EventHandle</td><td style="text-align:left;"></td><td style="text-align:left;">当视频进入和退出全屏时触发，event.detail = {fullScreen, direction}，direction取为 vertical 或 horizontal</td><td style="text-align:left;">飞书小程序不支持</td></tr><tr><td style="text-align:left;">@waiting</td><td style="text-align:left;">EventHandle</td><td style="text-align:left;"></td><td style="text-align:left;">视频出现缓冲时触发</td><td style="text-align:left;">飞书小程序、快手小程序不支持</td></tr><tr><td style="text-align:left;">@error</td><td style="text-align:left;">EventHandle</td><td style="text-align:left;"></td><td style="text-align:left;">视频播放出错时触发</td><td style="text-align:left;">飞书小程序不支持</td></tr><tr><td style="text-align:left;">@progress</td><td style="text-align:left;">EventHandle</td><td style="text-align:left;"></td><td style="text-align:left;">加载进度变化时触发，只支持一段加载。<code>event.detail = {buffered}</code>，百分比</td><td style="text-align:left;">微信小程序、字节跳动小程序、H5</td></tr><tr><td style="text-align:left;">@loadeddata</td><td style="text-align:left;">EventHandle</td><td style="text-align:left;"></td><td style="text-align:left;">视频资源开始加载时触发</td><td style="text-align:left;">京东小程序</td></tr><tr><td style="text-align:left;">@loadstart</td><td style="text-align:left;">EventHandle</td><td style="text-align:left;"></td><td style="text-align:left;">开始加载数据</td><td style="text-align:left;">京东小程序</td></tr><tr><td style="text-align:left;">@seeked</td><td style="text-align:left;">EventHandle</td><td style="text-align:left;"></td><td style="text-align:left;">拖动进度条结束</td><td style="text-align:left;">京东小程序</td></tr><tr><td style="text-align:left;">@seeking</td><td style="text-align:left;">EventHandle</td><td style="text-align:left;"></td><td style="text-align:left;">正在拖动进度条</td><td style="text-align:left;">京东小程序</td></tr><tr><td style="text-align:left;">@loadedmetadata</td><td style="text-align:left;">EventHandle</td><td style="text-align:left;"></td><td style="text-align:left;">视频元数据加载完成时触发。e<code>vent.detail = {width, height, duration}</code></td><td style="text-align:left;">微信小程序、H5、字节跳动小程序、京东小程序</td></tr><tr><td style="text-align:left;">@fullscreenclick</td><td style="text-align:left;">EventHandle</td><td style="text-align:left;"></td><td style="text-align:left;">视频播放全屏播放时点击事件。<code>event.detail = { screenX:&quot;Number类型，点击点相对于屏幕左侧边缘的 X 轴坐标&quot;, screenY:&quot;Number类型，点击点相对于屏幕顶部边缘的 Y 轴坐标&quot;, screenWidth:&quot;Number类型，屏幕总宽度&quot;, screenHeight:&quot;Number类型，屏幕总高度&quot;}</code></td><td style="text-align:left;">App 2.6.3+</td></tr><tr><td style="text-align:left;">@controlstoggle</td><td style="text-align:left;">EventHandle</td><td style="text-align:left;"></td><td style="text-align:left;">切换 controls 显示隐藏时触发。<code>event.detail = {show}</code></td><td style="text-align:left;">微信小程序2.9.5</td></tr></tbody></table><p><code>&lt;video&gt;</code> 默认宽度 300px、高度 225px，可通过 css 设置宽高。</p><h5 id="direction-的合法值" tabindex="-1">direction 的合法值 <a class="header-anchor" href="#direction-的合法值" aria-label="Permalink to &quot;direction 的合法值&quot;">​</a></h5><table><thead><tr><th style="text-align:left;">值</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">0</td><td style="text-align:left;">正常竖向</td></tr><tr><td style="text-align:left;">90</td><td style="text-align:left;">屏幕逆时针90度</td></tr><tr><td style="text-align:left;">-90</td><td style="text-align:left;">屏幕顺时针90度</td></tr></tbody></table><h5 id="object-fit-的合法值" tabindex="-1">object-fit 的合法值 <a class="header-anchor" href="#object-fit-的合法值" aria-label="Permalink to &quot;object-fit 的合法值&quot;">​</a></h5><table><thead><tr><th style="text-align:left;">值</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">contain</td><td style="text-align:left;">包含</td></tr><tr><td style="text-align:left;">fill</td><td style="text-align:left;">填充</td></tr><tr><td style="text-align:left;">cover</td><td style="text-align:left;">覆盖</td></tr></tbody></table><h5 id="play-btn-position-的合法值" tabindex="-1">play-btn-position 的合法值 <a class="header-anchor" href="#play-btn-position-的合法值" aria-label="Permalink to &quot;play-btn-position 的合法值&quot;">​</a></h5><table><thead><tr><th style="text-align:left;">值</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">bottom</td><td style="text-align:left;">controls bar上</td></tr><tr><td style="text-align:left;">center</td><td style="text-align:left;">视频中间</td></tr></tbody></table><p><strong>示例</strong> <a href="https://hellouniapp.dcloud.net.cn/pages/component/video/video" target="_blank" rel="noreferrer">查看示例</a></p><p>::: preview <a href="https://hellouniapp.dcloud.net.cn/pages/component/video/video" target="_blank" rel="noreferrer">https://hellouniapp.dcloud.net.cn/pages/component/video/video</a></p><blockquote><p>Template</p></blockquote><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uni-padding-wrap uni-common-mt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">video</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">myVideo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://img.cdn.aliyun.dcloud.net.cn/guide/uniapp/%E7%AC%AC1%E8%AE%B2%EF%BC%88uni-app%E4%BA%A7%E5%93%81%E4%BB%8B%E7%BB%8D%EF%BC%89-%20DCloud%E5%AE%98%E6%96%B9%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B@20200317.mp4</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">                    </span><span style="color:#C792EA;">@error</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">videoErrorCallback</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">:danmu-list</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">danmuList</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">enable-danmu</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">danmu-btn</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">controls</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">video</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;">&lt;!-- #ifndef MP-ALIPAY --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uni-list uni-common-mt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uni-list-cell</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uni-label</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">弹幕内容</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uni-list-cell-db</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">v-model</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">danmuValue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uni-input</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">text</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">placeholder</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">在此处输入弹幕内容</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uni-btn-v</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">@click</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">sendDanmu</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">page-body-button</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">发送弹幕</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;">&lt;!-- #endif --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">view</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><blockquote><p>Script</p></blockquote><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            src</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">            danmuList</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                    text</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">第 1s 出现的弹幕</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">                    color</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#ff0000</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">                    time</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                    text</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">第 3s 出现的弹幕</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">                    color</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#ff00ff</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">                    time</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">3</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">            ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">            danmuValue</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">onReady</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// #ifndef MP-ALIPAY</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">videoContext</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createVideoContext</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">myVideo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// #endif</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">methods</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">sendDanmu</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">videoContext</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sendDanmu</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                text</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">danmuValue</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">                color</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">getRandomColor</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">danmuValue</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">videoErrorCallback</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">uni</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">showModal</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                content</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">errMsg</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">                showCancel</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">getRandomColor</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">rgb</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">++</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">color</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">floor</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">random</span><span style="color:#F07178;">() </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">256</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">16</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#A6ACCD;">color</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">color</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">0</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">color</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">color</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#A6ACCD;">rgb</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">color</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">rgb</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>:::</p><p>相关api：<a href="/leo-docs/api/media/video-context.html?id=createvideocontext">uni.createVideoContext</a></p><p><strong>注意</strong></p><ul><li><p>视频播放格式说明：</p><ul><li>H5平台：支持的视频格式视浏览器而定，一般通用的都支持：mp4、webm 和 ogg。（<code>&lt;video/&gt;</code> 组件编译到 H5 时会替换为标准 html 的 video 标签）。H5端也可以自行在条件编译里使用video.js等三方库，这些库可以自动判断环境兼容以决定使用标准video或flash来播放。</li><li>小程序平台：各小程序平台支持程度不同，详见各家文档：<a href="https://developers.weixin.qq.com/miniprogram/dev/component/video.html" target="_blank" rel="noreferrer">微信小程序视频组件文档</a>、<a href="https://docs.alipay.com/mini/component/video" target="_blank" rel="noreferrer">支付宝小程序video组件</a>、<a href="https://smartprogram.baidu.com/docs/develop/component/media/#video/" target="_blank" rel="noreferrer">百度小程序视频组件文档</a>、<a href="https://developer.open-douyin.com/docs/resource/zh-CN/mini-app/develop/component/media-component/video/" target="_blank" rel="noreferrer">字节跳动小程序视频组件文档</a>、<a href="https://q.qq.com/wiki/develop/miniprogram/component/media/camera.html" target="_blank" rel="noreferrer">QQ小程序视频组件文档</a>、<a href="https://developer.huawei.com/consumer/cn/doc/development/quickApp-References/webview-component-video" target="_blank" rel="noreferrer">华为快应用视频组件文档</a></li><li>App平台： 支持本地视频(mp4/flv)、网络视频地址（mp4/flv/m3u8）及流媒体（rtmp/hls/rtsp）。</li></ul></li><li><p>video<strong>全屏</strong>后，如何自行绘制界面？比如加个标题、加个分享按钮</p><ul><li>微信基础库 2.4.0 以上可通过cover-view来绘制界面覆盖元素</li><li>app端 2.1.5 以上nvue页面的video也可以通过cover-view来绘制界面覆盖元素</li><li>H5端可通过通用h5做法实现</li><li>其他端无法全屏后自行绘制内容</li></ul></li><li><p>如何实现抖音、映客等全屏视频垂直滑动切换效果？</p><ul><li>微信基础库 2.4.0 和 app端nvue 2.1.5 以上，可通过在垂直的swiper中内嵌video来实现。原生导航栏设置为custom，视频长宽设为手机屏幕大小，通过cover-view覆盖视频内容。插件市场有相关<a href="https://ext.dcloud.net.cn/search?q=%E6%8A%96%E9%9F%B3" target="_blank" rel="noreferrer">示例</a></li></ul></li><li><p><code>&lt;video/&gt;</code> 组件在非H5端是原生组件，层级高于普通前端组件，覆盖其需要使用<a href="https://uniapp.dcloud.io/component/cover-view?id=cover-view" target="_blank" rel="noreferrer">cover-view</a>组件或plus.nativeObj.view、subNVue。微信基础库 2.4.0+和字节跳动小程序 已支持 video 组件的同层渲染，也就是video在非全屏时，可以被前端元素通过调节z-index来遮挡，但video全屏时，仍需要cover-view覆盖。</p></li><li><p>除微信基础库 2.4.0+ 和 字节跳动小程序 和 app-nvue 2.1.5+，其他情况下非H5的video不能放入scroll-view和swiper。注意参考 <a href="/leo-docs/component/native-component.html">原生组件使用限制</a>。</p></li><li><p>你也可以尝试换个设计思路，如：列表中的视频组件是通过图片与icon模拟的，点击后播放全屏播放视频的方案。详情<a href="https://ext.dcloud.net.cn/plugin?id=3549" target="_blank" rel="noreferrer">【video组件会覆盖页面其他非原生组件的设计替代方案示例】</a></p></li><li><p>App平台：使用 <code>&lt;video/&gt;</code> 组件，打包 App 时必须勾选 manifest.json-&gt;App 模块权限配置-&gt;VideoPlayer 模块。此模块体积较大，非默认内置。</p></li><li><p>App平台：如果使用的视频路径为本地路径，需要配置资源为释放模式：在 manifest.json 文件内 app-plus 节点下新增 runmode 配置，设置值为liberate。</p></li><li><p>App平台：如果想使用非原生的video，即原来普通的html5自带video，可使用web-view组件load html页面，在其中使用普通h5 video。</p></li><li><p>App平台：app-vue即使选择了使用x5内核，也不会使用x5的video播放，仍然使用uni-app的App引擎自带的原生视频播放。</p></li><li><p>App平台：3.6.14 以及 手机系统 iOS16 以上video<strong>全屏</strong> 需要配置应用支持横屏： 在 manifest.json 文件内 app-plus 节点下新增 screenOrientation 配置，设置值为[&quot;portrait-primary&quot;,&quot;portrait-secondary&quot;,&quot;landscape-primary&quot;,&quot;landscape-secondary&quot;]。</p></li><li><p>H5平台： 在部分浏览器中会强制调用原生播放器播放（如：微信内置浏览器、UC浏览器等），在 x5 内核的浏览器中支持配置<a href="https://x5.tencent.com/docs/video.html" target="_blank" rel="noreferrer">同层播放器</a>。</p></li><li><p>HBuilderX内置浏览器，使用video标签暂时存在问题，请先使用其他外部浏览器。</p></li></ul>`,21),o=[a];function p(r,y,c,d,i,F){return s(),l("div",null,o)}const f=t(n,[["render",p]]);export{g as __pageData,f as default};
